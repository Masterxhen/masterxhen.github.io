(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c4b56d8a"],{"1ede":function(t,e,a){},c2ce:function(t,e,a){"use strict";var i=a("1ede"),o=a.n(i);o.a},f15b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("h3",[t._v("Main Content")]),a("div",{staticClass:"row flex justify-center"},t._l(t.layouts,function(e){return a("q-card",{key:e[".key"],staticClass:"col-8 q-my-md",attrs:{inline:""}},[a("q-card-media",[a("img",{attrs:{src:e.imgSrc}})]),a("q-card-title",[t._v("\n        "+t._s(e.title)+"\n      ")]),a("q-card-main",[a("p",[t._v(t._s(e.caption))]),a("a",{attrs:{href:e.link}},[a("p",{staticClass:"text-faded"},[t._v("Go to link")])])]),a("q-card-separator"),a("q-card-actions",[a("q-btn",{attrs:{flat:"",color:"primary",label:"Edit Layout"},on:{click:function(a){t.editLayout(e)}}})],1)],1)})),a("q-modal",{attrs:{"no-backdrop-dismiss":"",clearable:t.opened,"content-css":{minWidth:"60vw",minHeight:"40vh"}},on:{"escape-key":t.cancel},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("div",{staticClass:"q-ma-xl"},[a("h4",[t._v("Edit Layout")]),a("q-input",{attrs:{"float-label":"Title"},model:{value:t.layout.title,callback:function(e){t.$set(t.layout,"title",e)},expression:"layout.title"}}),a("q-input",{attrs:{"float-label":"Caption",type:"textarea",rows:"5","max-height":5},model:{value:t.layout.caption,callback:function(e){t.$set(t.layout,"caption",e)},expression:"layout.caption"}}),a("q-input",{attrs:{"float-label":"Link"},model:{value:t.layout.link,callback:function(e){t.$set(t.layout,"link",e)},expression:"layout.link"}}),a("q-uploader",{ref:"uploader",attrs:{url:"","hide-upload-button":"","hide-upload-progress":"",extensions:"image/*"},on:{add:t.imgAdded,"remove:cancel":t.imgRemoved}}),a("br"),a("q-btn",{attrs:{color:"red",label:"Close"},on:{click:t.cancel}}),a("q-btn",{staticClass:"float-right",attrs:{color:"green",label:"Update Layout"},on:{click:t.uploadImg}})],1)])],1)},o=[];i._withStripped=!0;a("b54a"),a("7f7f");var l={name:"PageName",data:function(){return{edit:!1,layouts:[],layout:{caption:"",imgSrc:"",link:"",ref:"",title:""},image:null,key:"",opened:!1}},created:function(){this.$bindAsArray("layouts",this.$layoutRef)},methods:{imgAdded:function(t){this.image=t[0],console.log("uploader files",this.$refs.uploader.files[0].name),console.log("image file",this.image),console.log("image",this.image.name),console.log("size in kilobytes",this.image.size/1e3)},imgRemoved:function(){this.image=null,console.log("uploader files",this.$refs.uploader.files[0].name)},editLayout:function(t){console.log(t),this.key=t[".key"],this.opened=!0,this.layout.caption=t.caption,this.layout.imgSrc=t.imgSrc,this.layout.link=t.link,this.layout.title=t.title},uploadImg:function(){var t=this;if(null!==this.image){this.$storage.ref().child(this.layout.ref).delete(),this.layout.ref="img/slider/".concat(this.image.name),console.log("imageref",this.layout.ref);var e=this.$storage.ref().child("img/slider/"+this.image.name),a=e.put(this.image);a.on("state_changed",function(){},function(t){console.log("this is error state change",t)},function(){a.snapshot.ref.getDownloadURL().then(function(e){console.log("Update File available at",e),t.layout.imgSrc=e,setInterval(t.updateLayout(),3e3)})})}else this.updateLayout()},updateLayout:function(){var t=this;this.$layoutRef.child(this.key).update(this.layout).then(function(){t.$q.notify({type:"info",color:"positive",timeout:2e3,message:t.layout.title+" has been Updated"})}).then(function(){t.cancel()}).catch(function(e){t.$q.notify({type:"negative",color:"negative",timeout:2e3,message:e.errorCode+" : "+e.errorMessage})})},cancel:function(){this.key="",this.layout.caption="",this.layout.imgSrc="",this.layout.link="",this.layout.title="",this.opened=!1}}},n=l,s=(a("c2ce"),a("2877")),c=Object(s["a"])(n,i,o,!1,null,null,null);c.options.__file="header.vue";e["default"]=c.exports}}]);